<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
        namespace="com.carblre.repository.interfaces.LawyerRepository">


    <!-- 변호사 리스트 -->
    <select id="getAllLawyers" resultType="com.carblre.dto.LawyerDetailDTO">
        SELECT
        ld.user_id AS userId,
        u.user_name AS userName,  <!-- userName을 추가 -->
        ld.upload_profile_name AS uploadProfileName,
        ld.introduction,
        ld.law_firm AS lawFirm,
        ld.office_num AS officeNum
        FROM
        lawyer_detail_tb ld
        JOIN
        user_tb u ON ld.user_id = u.id  <!-- user 테이블과 조인 -->
    </select>

    <!-- 변호사 상세정보 조회 -->
    <select id="getLawyerById" parameterType="int" resultType="com.carblre.dto.LawyerDetailDTO">
        SELECT
        ld.user_id AS userId,
        u.user_name AS userName,
        ld.upload_profile_name AS uploadProfileName,
        ld.introduction,
        ld.law_firm AS lawFirm,
        ld.office_num AS officeNum
        FROM
        lawyer_detail_tb ld
        JOIN
        user_tb u ON ld.user_id = u.id
        WHERE
        ld.user_id = #{userId}
    </select>


    <!-- 변호사 디테일 조회 -->
    <select id="findLawyerInfoById"  resultType="com.carblre.repository.model.LawyerDetail">
        SELECT * FROM lawyer_detail_tb
        WHERE user_id = #{id}
    </select>
</mapper>