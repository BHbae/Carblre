<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.carblre.repository.interfaces.CounselRepository">


	<!-- 유저의  변호사 예약 상황 -->
	<select id="findCounselOfUserById"  resultType="com.carblre.repository.model.Counsel">
		SELECT * FROM counsel_request_tb
		where user_id= #{userId}
		order by created_at asc;
	</select>

	<!--  변호사 예약 상황 -->
	<select id="findCounselOfLawyerById"  resultType="com.carblre.repository.model.Counsel">
		SELECT * FROM counsel_request_tb
		where lawyer_id = #{userId}
		order by created_at asc;
	</select>

	<!-- 변호사 예약 상태 변경 -->
	<update id="updateStatusById" >
		UPDATE counsel_request_tb
		SET status = #{status}
		WHERE id = #{id}
	</update>

	<!-- id값으로 변경된 status 조회 -->
	<select id="findStatusById"  resultType="com.carblre.repository.model.Counsel">
		select status
		from counsel_request_tb
		where user_id = #{id}
	</select>

	<!-- 유저 예약 취소 -->
	<update id="updateUserStatusById" >
		UPDATE counsel_request_tb
		SET user_status = #{status}
		WHERE user_id = #{id}
	</update>

</mapper>