<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.carblre.repository.TestBoardRepository">



	<insert id="savePost">
		INSERT INTO post_tb (
		user_id,
		status,
		category,
		title,
		content,
		origin_file_name,
		upload_file_name,
		create_at
		) VALUES (
		1,
		#{status},
		#{category},
		#{title},
		#{content},
		#{originFileName},
		#{uploadFileName},
		NOW()
		)
	</insert>
	
	<select id="findAllBoard" resultType="com.carblre.repository.model.Post">
		SELECT * FROM post_tb
	</select>

	<select id="selectByPostId" resultType="com.carblre.dto.DetailDTO">
		SELECT
		p.id AS postId,
		p.user_id AS userId,
		p.status,
		p.category,
		p.title,
		p.content,
		p.create_at AS createdAt,
		u.user_name AS userName,
		u.nick_name AS nickName,
		u.email AS userEmail,
		u.phone_num AS userPhone,
		u.role AS userRole
		FROM
		post_tb p
		LEFT JOIN
		user_tb u ON p.user_id = u.id
		WHERE
		p.id = #{id};
	</select>

</mapper>